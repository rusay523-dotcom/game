<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ğ¯ ĞšĞ°Ñ‡Ğ¾Ğº 5.0</title>
<style>
body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: url('gym_bg.png') center/cover no-repeat;
    height: 100vh;
    color: white;
    text-align: center;
    display: flex;
    justify-content: center;
    align-items: center;
}
.game {
    position: relative;
    width: 100%;
    max-width: 400px;
    padding: 20px;
    box-sizing: border-box;
}
#hero, .enemy {
    width: 120px;
    position: absolute;
    top: 40%;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}
#hero { left: 30%; transform: translate(-50%, -50%);}
.enemy { left: 70%; transform: translate(-50%, -50%); opacity: 0.8;}
#hero.power { transform: translate(-50%, -50%) scale(1.3) rotate(-5deg); }
.enemy.hit { transform: translate(-50%, -50%) scale(1.2); opacity: 1; box-shadow: 0 0 20px red;}
.stats { margin-top: 280px; font-size: 18px; }
.buttons { margin-top: 10px; width: 100%; max-width: 320px; }
button { width: 100%; padding: 12px; margin: 6px 0; font-size: 16px; border-radius: 10px; border: none; cursor: pointer; }
.train { background: #2196f3; color: white; }
.energy { background: #ff9800; color: white; }
.event { background: #4caf50; color: white; }
.pvp { background: #e91e63; color: white; }
.leaderboard { margin-top: 10px; font-size: 16px; text-align: left; }
.flash { position: absolute; width: 50px; height: 50px; border-radius: 50%; background: yellow; opacity: 0.7; pointer-events: none; }
</style>
</head>
<body>

<div class="game">
<h1>ğŸ’ª ĞšĞ°Ñ‡Ğ¾Ğº 5.0</h1>

<img id="hero" src="hero.png" alt="ĞŸĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶">
<div id="enemies"></div>

<div class="stats">
ğŸ”¥ Ğ¡Ğ¸Ğ»Ğ°: <span id="strength">1</span><br>
ğŸ‹ï¸â€â™‚ï¸ Ğ’Ñ‹Ğ½Ğ¾ÑĞ»Ğ¸Ğ²Ğ¾ÑÑ‚ÑŒ: <span id="stamina">1</span><br>
âš¡ Ğ›Ğ¾Ğ²ĞºĞ¾ÑÑ‚ÑŒ: <span id="agility">1</span><br>
ğŸ† ĞÑ‡ĞºĞ¸: <span id="points">0</span>
</div>

<div class="buttons">
<button class="train" onclick="train()">Ğ¢Ñ€ĞµĞ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒÑÑ</button>
<button class="energy" onclick="energy()">Ğ­Ğ½ĞµÑ€Ğ³ĞµÑ‚Ğ¸Ğº +2</button>
<button class="event" onclick="randomEvent()">Ğ¡Ğ»ÑƒÑ‡Ğ°Ğ¹Ğ½Ğ¾Ğµ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğµ</button>
<button class="pvp" onclick="battle()">Ğ¡Ñ€Ğ°Ğ·Ğ¸Ñ‚ÑŒÑÑ Ñ Ğ²Ñ€Ğ°Ğ³Ğ¾Ğ¼</button>
</div>

<div class="leaderboard">
<h2>ğŸ… Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° Ñ€ĞµĞºĞ¾Ñ€Ğ´Ğ¾Ğ²</h2>
<ol id="leaderboardList"></ol>
</div>
</div>

<script>
let strength = 1, stamina = 1, agility = 1, points = 0;
const hero = document.getElementById("hero");
const enemiesDiv = document.getElementById("enemies");
const strengthEl = document.getElementById("strength");
const staminaEl = document.getElementById("stamina");
const agilityEl = document.getElementById("agility");
const pointsEl = document.getElementById("points");
const leaderboardList = document.getElementById("leaderboardList");

function animateHero() { hero.classList.add("power"); setTimeout(()=>hero.classList.remove("power"),200);}
function animateEnemy(enemy){ enemy.classList.add("hit"); setTimeout(()=>enemy.classList.remove("hit"),200);}
function flashEffect(x,y){
    const f=document.createElement("div");
    f.className="flash"; f.style.left=x-25+"px"; f.style.top=y-25+"px";
    document.body.appendChild(f);
    setTimeout(()=>document.body.removeChild(f),200);
}

function train(){ strength++; stamina++; agility++; points++; updateStats(); animateHero();}
function energy(){ strength+=2; stamina+=2; agility+=2; points++; updateStats(); animateHero();}
function randomEvent(){
    const e=Math.floor(Math.random()*3);
    if(e==0){strength+=3; alert("ğŸ’¥ Ğ¡Ğ¸Ğ»Ğ° +3!");}
    else if(e==1){stamina+=3; alert("ğŸ‹ï¸â€â™‚ï¸ Ğ’Ñ‹Ğ½Ğ¾ÑĞ»Ğ¸Ğ²Ğ¾ÑÑ‚ÑŒ +3!");}
    else{agility+=3; alert("âš¡ Ğ›Ğ¾Ğ²ĞºĞ¾ÑÑ‚ÑŒ +3!");}
    points+=2; updateStats(); animateHero();
}

function battle(){
    const enemyData=[
        {name:"Ğ‘Ñ€ÑƒÑ‚",img:"https://via.placeholder.com/120x120.png?text=Ğ‘Ñ€ÑƒÑ‚"},
        {name:"Ğ¥Ğ°Ñ€Ğ´ĞºĞ¾Ñ€",img:"https://via.placeholder.com/120x120.png?text=Ğ¥Ğ°Ñ€Ğ´ĞºĞ¾Ñ€"},
        {name:"ĞœÑÑĞ¾",img:"https://via.placeholder.com/120x120.png?text=ĞœÑÑĞ¾"},
        {name:"Ğ¡Ğ¸Ğ»Ğ°Ñ‡",img:"https://via.placeholder.com/120x120.png?text=Ğ¡Ğ¸Ğ»Ğ°Ñ‡"}
    ];
    const e=enemyData[Math.floor(Math.random()*enemyData.length)];
    const enemy=document.createElement("img");
    enemy.src=e.img; enemy.className="enemy"; enemiesDiv.appendChild(enemy);
    alert(`Ğ¢Ñ‹ ÑÑ€Ğ°Ğ¶Ğ°ĞµÑˆÑŒÑÑ Ñ ${e.name}!`);
    const enemyStats={strength:Math.floor(Math.random()*10+1),stamina:Math.floor(Math.random()*10+1),agility:Math.floor(Math.random()*10+1)};
    let playerScore=strength+stamina+agility;
    let enemyScore=enemyStats.strength+enemyStats.stamina+enemyStats.agility;
    
    let rounds=3,i=0;
    let fightInterval=setInterval(()=>{
        if(i>=rounds){ clearInterval(fightInterval); finishBattle(playerScore,enemyScore,enemy); return;}
        animateHero(); animateEnemy(enemy);
        const heroRect=hero.getBoundingClientRect();
        const enemyRect=enemy.getBoundingClientRect();
        flashEffect((heroRect.left+heroRect.right)/2,(heroRect.top+heroRect.bottom)/2);
        flashEffect((enemyRect.left+enemyRect.right)/2,(enemyRect.top+enemyRect.bottom)/2);
        i++;
    },400);
}

function finishBattle(playerScore,enemyScore,enemy){
    if(playerScore>=enemyScore){
        alert(`ğŸ† ĞŸĞ¾Ğ±ĞµĞ´Ğ°! Ğ¢Ñ‹ ${playerScore} vs Ğ’Ñ€Ğ°Ğ³ ${enemyScore}`);
        points+=5+Math.floor(Math.random()*3);
        animateHero();
    } else { alert(`ğŸ˜¢ ĞŸĞ¾Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ. Ğ¢Ñ‹ ${playerScore} vs Ğ’Ñ€Ğ°Ğ³ ${enemyScore}`); points+=1; }
    updateStats(); saveLeaderboard();
    enemy.remove();
}

function updateStats(){
    strengthEl.textContent=strength;
    staminaEl.textContent=stamina;
    agilityEl.textContent=agility;
    pointsEl.textContent=points;
}

function saveLeaderboard(){
    let leaderboard=JSON.parse(localStorage.getItem('leaderboard')||"[]");
    leaderboard.push({points,strength,stamina,agility});
    leaderboard.sort((a,b)=>b.points-a.points);
    if(leaderboard.length>5) leaderboard=leaderboard.slice(0,5);
    localStorage.setItem('leaderboard',JSON.stringify(leaderboard));
    renderLeaderboard();
}

function renderLeaderboard(){
    const leaderboard=JSON.parse(localStorage.getItem('leaderboard')||"[]");
    leaderboardList.innerHTML="";
    leaderboard.forEach(entry=>{
        const li=document.createElement("li");
        li.textContent=`ğŸ† ${entry.points} | ğŸ’ª ${entry.strength} | ğŸ‹ï¸â€â™‚ï¸ ${entry.stamina} | âš¡ ${entry.agility}`;
        leaderboardList.appendChild(li);
    });
}

hero.onclick=train;
renderLeaderboard();
</script>

</body>
</html>
