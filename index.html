<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–ö–∞—á–æ–∫ PvP 2.0</title>
<style>
body {margin:0; font-family:Arial,sans-serif; background:url('gym_bg.png') center/cover no-repeat; height:100vh; color:white; text-align:center; display:flex; justify-content:center; align-items:center;}
.game {position:relative; width:100%; max-width:500px; padding:20px; box-sizing:border-box;}
#hero,#enemy {width:120px; position:absolute; top:40%; transition: transform 0.2s ease, box-shadow 0.2s ease;}
#hero {left:25%; transform:translate(-50%,-50%) scale(1);}
#enemy {left:75%; transform:translate(-50%,-50%) scale(1);}
#hero.power {transform:translate(-50%, -50%) scale(1.2) rotate(-5deg);}
#enemy.hit {transform:translate(-50%,-50%) scale(1.1); box-shadow:0 0 20px red;}
.stats {margin-top:280px; font-size:18px;}
.buttons {margin-top:10px; width:100%; max-width:320px;}
button {width:100%; padding:12px; margin:6px 0; font-size:16px; border-radius:10px; border:none; cursor:pointer;}
.attack {background:#f44336; color:white;}
.defend {background:#4caf50; color:white;}
.energy {background:#ff9800; color:white;}
.train {background:#2196f3; color:white;}
.flash {position:absolute; width:50px; height:50px; border-radius:50%; background:yellow; opacity:0.7; pointer-events:none;}
</style>
</head>
<body>

<div class="game">
<h1>üí™ –ö–∞—á–æ–∫ PvP 2.0</h1>
<img id="hero" src="hero.png" alt="–ü–µ—Ä—Å–æ–Ω–∞–∂">
<img id="enemy" src="https://via.placeholder.com/120x120.png?text=–í—Ä–∞–≥" alt="–í—Ä–∞–≥">

<div class="stats">
üí™ –°–∏–ª–∞: <span id="playerStr">5</span><br>
‚ù§Ô∏è HP: <span id="playerHP">20</span><br>
‚ö° –õ–æ–≤–∫–æ—Å—Ç—å: <span id="playerAg">3</span><br>
üí™ –í—Ä–∞–≥ —Å–∏–ª–∞: <span id="enemyStr">5</span><br>
‚ù§Ô∏è –í—Ä–∞–≥ HP: <span id="enemyHP">20</span><br>
‚ö° –í—Ä–∞–≥ –ª–æ–≤–∫–æ—Å—Ç—å: <span id="enemyAg">3</span>
</div>

<div class="buttons">
<button class="attack" onclick="playerMove('attack')">–ê—Ç–∞–∫–∞</button>
<button class="defend" onclick="playerMove('defend')">–ó–∞—â–∏—Ç–∞</button>
<button class="energy" onclick="playerMove('energy')">–≠–Ω–µ—Ä–≥–µ—Ç–∏–∫</button>
<button class="train" onclick="playerMove('train')">–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</button>
</div>
</div>

<script>
let player={hp:20,str:5,ag:3};
let enemy={hp:20,str:5,ag:3};
const hero=document.getElementById("hero");
const enemyEl=document.getElementById("enemy");
const playerHP=document.getElementById("playerHP");
const playerStr=document.getElementById("playerStr");
const playerAg=document.getElementById("playerAg");
const enemyHP=document.getElementById("enemyHP");
const enemyStr=document.getElementById("enemyStr");
const enemyAg=document.getElementById("enemyAg");

function flashEffect(x,y){ const f=document.createElement("div"); f.className="flash"; f.style.left=x-25+"px"; f.style.top=y-25+"px"; document.body.appendChild(f); setTimeout(()=>document.body.removeChild(f),200);}
function animateHero(){ hero.classList.add("power"); setTimeout(()=>hero.classList.remove("power"),200);}
function animateEnemy(){ enemyEl.classList.add("hit"); setTimeout(()=>enemyEl.classList.remove("hit"),200);}
function updateStats(){
    playerHP.textContent=player.hp; playerStr.textContent=player.str; playerAg.textContent=player.ag;
    enemyHP.textContent=enemy.hp; enemyStr.textContent=enemy.str; enemyAg.textContent=enemy.ag;
}
function checkWin(){
    if(player.hp<=0){ alert("üò¢ –¢—ã –ø—Ä–æ–∏–≥—Ä–∞–ª!"); resetGame();}
    else if(enemy.hp<=0){ alert("üèÜ –ü–æ–±–µ–¥–∞!"); resetGame();}
}
function resetGame(){ player={hp:20,str:5,ag:3}; enemy={hp:20,str:5,ag:3}; updateStats(); }

function calculateDamage(attacker,defender){
    let base=attacker.str * (0.8 + Math.random()*0.4);
    let dodge=Math.random()*10;
    if(dodge<defender.ag){ base=0; } // —É–∫–ª–æ–Ω–µ–Ω–∏–µ
    return Math.floor(base);
}

function enemyMove(){
    // —É–º–Ω—ã–π –ò–ò
    let move;
    if(enemy.hp<=5 && enemy.str<player.str){ move=Math.random()<0.7?'energy':'defend'; }
    else if(player.hp<=5){ move=Math.random()<0.7?'attack':'train'; }
    else{ move=Math.random()<0.5?'attack':'train'; }

    if(move==='attack'){ let dmg=calculateDamage(enemy,player); player.hp-=dmg; animateEnemy(); flashEffect(hero.getBoundingClientRect().left+60,hero.getBoundingClientRect().top+60);}
    else if(move==='defend'){ enemy.str+=1; }
    else if(move==='energy'){ enemy.str+=2; }
    else if(move==='train'){ enemy.str+=1; enemy.hp+=1; }
    updateStats(); checkWin();
}

function playerMove(move){
    if(move==='attack'){ let dmg=calculateDamage(player,enemy); enemy.hp-=dmg; animateHero(); flashEffect(enemyEl.getBoundingClientRect().left+60,enemyEl.getBoundingClientRect().top+60);}
    else if(move==='defend'){ player.str+=1; }
    else if(move==='energy'){ player.str+=2; }
    else if(move==='train'){ player.str+=1; player.hp+=1; player.ag+=1; }

    updateStats(); checkWin();
    setTimeout(enemyMove,500);
}
updateStats();
</script>

</body>
</html>
